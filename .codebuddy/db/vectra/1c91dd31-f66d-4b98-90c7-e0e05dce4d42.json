{"chunk":3,"numChunks":12,"fileHash":"8yd4y+8BiKMN/ahRX//8mP8WbEOsfc/I+OUKnbnLr8o=","filePath":"project-board-sync/src/utils/environment-validator.js","content":"/**\nclass EnvironmentValidator {\n  static async validateGitHubToken() {\n    try {\n      const { graphql } = require('../github/api');\n      \n      log.info('Testing GitHub token with viewer query...');\n      \n      const result = await graphql(`\n        query {\n          viewer {\n            login\n            repositories(first: 1) {\n              nodes {\n                name\n              }\n            }\n          }\n        }\n      `);\n      \n      if (!result.viewer?.login) {\n        throw new Error('Token validation failed: Could not retrieve user information');\n      }\n      \n      log.info(`âœ“ GitHub token validated for user: ${result.viewer.login}`);\n      return result.viewer.login;\n      \n    } catch (error) {\n      log.error(`GitHub token validation error: ${error.message}`);\n      log.error(`Error stack: ${error.stack}`);\n      \n      if (error.message.includes('Bad credentials')) {\n        throw new Error(\n          `GitHub token validation failed: Invalid or expired token\\n` +\n          `Please check your GITHUB_TOKEN is valid and not expired.\\n` +\n          `Generate a new token at: https://github.com/settings/tokens`\n        );\n      } else if (error.message.includes('rate limit')) {\n        throw new Error(\n          `GitHub rate limit exceeded during token validation.\\n` +\n          `Please wait a few minutes and try again.`\n        );\n      } else {\n        throw new Error(\n          `GitHub token validation failed: ${error.message}\\n` +\n          `Please ensure your token has the following permissions:\\n` +\n          `  - repo (for repository access)\\n` +\n          `  - project (for project board access)\\n` +\n          `  - read:org (for organization access)`\n        );\n      }\n    }\n  }"}