{"chunk":10,"numChunks":14,"fileHash":"BR3KeY/jHTO4rmaSfUa3V5AEhCmP6zXL1SL7tJnnCcM=","filePath":"project-board-sync/src/rules/processors/__tests__/unified-rule-processor.test.js","content":"const { test } = require('node:test');\ntest('Unified Rule Processor - All Rule Types', async (t) => {\n    await t.test('processRuleType processes assignee rules correctly', async () => {\n        const item = {\n            __typename: 'PullRequest',\n            number: 123,\n            author: { login: 'test-user' },\n            assignees: { nodes: [] },\n            projectItems: { nodes: [] }\n        };\n\n        const actions = await processRuleType(item, 'assignees');\n        \n        assert.equal(actions.length, 1, 'Should process one assignee rule');\n        assert.equal(actions[0].action, 'add_assignee: item.author', 'Should have correct action');\n        assert.equal(actions[0].params.item, item, 'Should include item in params');\n        assert.equal(actions[0].params.assignee, 'item.author', 'Should include assignee in params');\n    });\n    await t.test('processRuleType processes linked_issues rules correctly', async () => {\n        const item = {\n            __typename: 'LinkedIssue',\n            number: 123,\n            pr: { closed: false, merged: true },\n            projectItems: { nodes: [] }\n        };\n\n        const actions = await processRuleType(item, 'linked_issues');\n        \n        assert.equal(actions.length, 2, 'Should process two linked issue actions');\n        assert.equal(actions[0].action, 'inherit_column', 'Should have first action');\n        assert.equal(actions[1].action, 'inherit_assignees', 'Should have second action');\n        assert.equal(actions[0].params.item, item, 'Should include item in params');\n        assert.equal(actions[0].params.rule, 'Test Linked Issue Rule', 'Should include rule name');\n        assert.deepEqual(actions[0].params.actions, ['inherit_column', 'inherit_assignees'], 'Should include all actions');\n    });"}